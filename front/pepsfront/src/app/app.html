@if (isLoggedIn()) {
<mat-sidenav-container class="app-container">
  <mat-sidenav [opened]="isSidenavOpen()" mode="side" class="sidenav">
    <div class="sidenav-header">
      <img src="favicon-96x96.png" alt="Logo PEP'S" class="logo" />
      <span class="logo-title">PEP'S</span>
    </div>

    <mat-nav-list>
      <mat-list-item
        (click)="setCurrentPage('dashboard')"
        [class.active]="currentPage() === 'dashboard'"
      >
        <mat-icon matListItemIcon>dashboard</mat-icon>
        <span matListItemTitle>Tableau de Bord</span>
      </mat-list-item>

      <mat-list-item
        (click)="setCurrentPage('interactions')"
        [class.active]="currentPage() === 'interactions'"
      >
        <mat-icon matListItemIcon>history</mat-icon>
        <span matListItemTitle>Interactions</span>
      </mat-list-item>

      <mat-list-item
        (click)="setCurrentPage('modules')"
        [class.active]="currentPage() === 'modules'"
      >
        <mat-icon matListItemIcon>developer_board</mat-icon>
        <span matListItemTitle>Modules</span>
      </mat-list-item>

      <mat-list-item
        (click)="setCurrentPage('sounds')"
        [class.active]="currentPage() === 'sounds'"
      >
        <mat-icon matListItemIcon>music_note</mat-icon>
        <span matListItemTitle>Sons</span>
      </mat-list-item>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content class="main-content">
    <mat-toolbar color="primary" class="toolbar">
      <button mat-icon-button (click)="toggleSidenav()" matTooltip="Menu">
        <mat-icon>menu</mat-icon>
      </button>
      <span>{{ pageTitle() }}</span>
    </mat-toolbar>

    <div class="page-area">
      @switch (currentPage()) { @case ('dashboard') {
      <app-dashboard />
      } @case ('interactions') {
      <app-interactions />
      } @case ('modules') {
      <app-modules-list
        (selectModule)="onSelectModule($event)"
        (addModule)="onAddModule()"
      />
      } @case ('module-detail') {
        @if(selectedModule(); as module) {
          <app-module-detail
            [module]="module"
            (moduleSaved)="onModuleSaved()"
          />
        }
      } @case ('add-module') {
      <app-module-form (moduleSaved)="onModuleSaved()" />
      } @case ('sounds') {
      <app-sounds />
      } }
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
} @else {
<app-login (loginSuccess)="onLoginSuccess()" />
}
@if (!isLoggedIn()) {
  <app-login (loginSuccess)="onLoginSuccess()"></app-login>
} @else {
  <mat-sidenav-container class="app-container">
    <!-- MENU LATÃ‰RAL (SIDENAV) -->
    <mat-sidenav [opened]="isSidenavOpen()" [mode]="'side'" class="sidenav">
      <app-sidenav 
        [currentPage]="currentPage()" 
        (pageChange)="onPageChange($event)">
      </app-sidenav>
    </mat-sidenav>

    <!-- CONTENU PRINCIPAL -->
    <mat-sidenav-content class="main-content">
      <!-- BARRE DE NAVIGATION (TOOLBAR) -->
      <app-toolbar 
        [pageTitle]="pageTitle()" 
        (toggleMenu)="toggleSidenav()">
      </app-toolbar>

      <!-- Zone d'affichage des pages -->
      <div class="page-area">
        @switch (currentPage()) {
          @case ('dashboard') {
            <app-dashboard></app-dashboard>
          }
          @case ('interactions') {
            <app-interactions></app-interactions>
          }
          @case ('modules') {
            <app-modules-list 
              #modulesList
              (selectModule)="onModuleSelect($event)"
              (addModule)="onModuleAdd()">
            </app-modules-list>
          }
          @case ('module-detail') {
            @if (selectedModule(); as module) {
              <app-module-detail 
                [module]="module"
                (saveSuccess)="onModuleSaveSuccess()"
                (deleteSuccess)="onModuleDeleteSuccess()"
                (cancel)="onCancel()">
              </app-module-detail>
            }
          }
          @case ('add-module') {
            <app-module-form 
              (createSuccess)="onModuleFormSuccess()"
              (cancel)="onCancel()">
            </app-module-form>
          }
          @case ('sounds') {
            <app-sounds></app-sounds>
          }
        }
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
}
